---
import me from "../assets/me.jpeg";
---

<div class="navbar">
  <div class="profile">
    <a href="/" class="home-link">
      <img src={me.src} alt="Tomas Caula" />
      <h1>Tomas Caula</h1>
    </a>
  </div>
  <div class="links">
    <a href="/blog">Blog</a>
    <a href="/#experience" id="experience-btn">Experiencia</a>
    <a href="/#contact" id="contact-btn">Contacto</a>
    <!-- // <a href="#projects">Hire Me</a> -->
  </div>
</div>

<style>
  html {
    scroll-behavior: smooth;
  }
</style>

<style>
  .navbar {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 1rem;
    background-color: transparent;
    color: var(--button-color);
  }

  .profile {
    display: flex;
    align-items: center;
    margin-bottom: 1rem;
  }

  .home-link {
    display: flex;
    flex-direction: row;
    border-color: none;
    align-items: center;
    text-decoration: none;
  }

  .navbar img {
    width: 40px;
    height: 40px;
  }

  .navbar h1 {
    font-size: 1.5rem;
    margin: 0 1rem;
    color: white;
  }

  .navbar > div:last-child {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 1rem;
  }

  .navbar .links a {
    display: inline-block;
    padding: 0.75rem 1.25rem;
    color: var(--button-color);
    font-size: 1rem;
    letter-spacing: 0.15rem;
    text-decoration: none;
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
    z-index: 1;
    border: 1px solid var(--button-color);
    cursor: pointer;
    /* Animaci贸n inicial */
    opacity: 0;
    transform: translateY(-20px);
    animation: fadeInDown 0.7s forwards;
  }

  /* Animaci贸n para los enlaces */
  .navbar .links a[href="/blog"] {
    animation-delay: 0.1s;
  }
  .navbar .links a#experience-btn {
    animation-delay: 0.2s;
  }
  .navbar .links a#contact-btn {
    animation-delay: 0.3s;
  }

  @keyframes fadeInDown {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .navbar .links a::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-color: var(--button-color);
    border-style: solid;
    border-width: 0px;
    z-index: -2;
  }

  .navbar .links a::before {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0%;
    height: 100%;
    background-color: color-mix(in srgb, var(--button-color) 85%, black);
    transition: all 0.3s;
    z-index: -1;
  }

  .navbar .links a:hover {
    color: #171c27;
  }

  .navbar .links a:hover::before {
    width: 100%;
  }

  img {
    border-radius: 50%;
  }

  @media (min-width: 768px) {
    .navbar {
      flex-direction: row;
      justify-content: space-between;
      padding: 1rem 2rem;
    }

    .profile {
      margin-bottom: 0;
    }

    .navbar > div:last-child {
      justify-content: flex-end;
    }
  }

  #verify {
    width: 25px;
    height: 25px;
  }
</style>

<script>
  // Modularizaci贸n de la funci贸n de scroll animado
  function scrollToSection(sectionId: string) {
    const element = document.getElementById(sectionId);
    if (element) {
      element.scrollIntoView({ behavior: "smooth" });
      // Opcional: cambiar la URL sin el hash
      history.replaceState(null, "", window.location.pathname);
    }
  }

  // Check if we're on the homepage
  function isHomePage() {
    return (
      window.location.pathname === "/" ||
      window.location.pathname === "/index.html"
    );
  }

  document.addEventListener("DOMContentLoaded", () => {
    // Handle navigation on page load if there's a hash
    if (isHomePage() && window.location.hash) {
      const sectionId = window.location.hash.substring(1);
      setTimeout(() => {
        scrollToSection(sectionId);
      }, 100);
    }

    const btnContacto = document.getElementById("contact-btn");
    if (btnContacto) {
      btnContacto.addEventListener("click", function (e) {
        // Only prevent default if we're on the homepage
        if (isHomePage()) {
          e.preventDefault();
          scrollToSection("contact");
        }
        // Otherwise, let the link navigate to /#contact
      });
    }

    const btnExperiencia = document.getElementById("experience-btn");
    if (btnExperiencia) {
      btnExperiencia.addEventListener("click", function (e) {
        // Only prevent default if we're on the homepage
        if (isHomePage()) {
          e.preventDefault();
          scrollToSection("experience");
        }
        // Otherwise, let the link navigate to /#experience
      });
    }
  });
</script>
